<style>
/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f8f9fa;
    line-height: 1.6;
}

/* Top Banner */
.top-banner {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
    padding: 12px 0;
    font-size: 14px;
    font-weight: 500;
    position: relative;
    overflow: hidden;
    width: 100vw;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
}

.top-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
}

.top-banner a {
    color: #fff;
    text-decoration: none;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 4px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.top-banner a:hover {
    background-color: rgba(255,255,255,0.2);
    transform: translateY(-1px);
}

/* Header */
.header {
    position: sticky;
    top: 0;
    z-index: 1000;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 20px rgba(0,0,0,0.08);
    border-bottom: 1px solid #e1e8ed;
    /* Remove background here, move to pseudo-element */
}

.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    height: 100%;
    background: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);
    z-index: -1;
}

.header-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 24px;
    position: relative;
}

/* Logo */
.logo {
    font-size: 36px;
    font-weight: 800;
    color: #1a1a1a;
    text-decoration: none;
    letter-spacing: -1px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.logo:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

/* Navigation */
.nav {
    display: flex;
    align-items: center;
    gap: 48px;
}

.nav-item {
    position: relative;
}

.nav-link {
    text-decoration: none;
    color: #374151;
    font-size: 16px;
    font-weight: 600;
    padding: 12px 0;
    border-bottom: 3px solid transparent;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.nav-link::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateX(-50%);
}

.nav-link:hover::before,
.nav-link.active::before {
    width: 100%;
}

.nav-link:hover,
.nav-link.active {
    color: #1f2937;
    transform: translateY(-2px);
}

.nav-link.active {
    color: #1a1a1a;
    font-weight: 700;
}

/* Right side icons */
.header-actions {
    display: flex;
    align-items: center;
    gap: 24px;
}

.search-container {
    position: relative;
}

.search-input {
    padding: 14px 24px 14px 50px;
    border: 2px solid #e5e7eb;
    border-radius: 50px;
    width: 320px;
    font-size: 15px;
    outline: none;
    background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.search-input:focus {
    border-color: #667eea;
    background: #ffffff;
    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
    transform: translateY(-1px);
}

.search-icon {
    position: absolute;
    left: 18px;
    top: 50%;
    transform: translateY(-50%);
    color: #6b7280;
    font-size: 18px;
    transition: all 0.3s ease;
}

.search-input:focus + .search-icon {
    color: #667eea;
    transform: translateY(-50%) scale(1.1);
}

.icon-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: #374151;
    cursor: pointer;
    position: relative;
    padding: 12px;
    border-radius: 50%;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.icon-btn:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
}

.cart-count {
    position: absolute;
    top: -2px;
    right: -2px;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    font-size: 11px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.cart-btn:hover .cart-count {
    transform: scale(1.2);
    animation: none;
}

/* Dropdown Menu */
.dropdown {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    background: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);
    border: 1px solid #e1e8ed;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.12);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-20px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 900px;
    z-index: 1000;
    backdrop-filter: blur(20px);
    overflow: hidden;
}

.dropdown::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 50px;
    width: 16px;
    height: 16px;
    background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
    border: 1px solid #e1e8ed;
    border-bottom: none;
    border-right: none;
    transform: rotate(45deg);
}

.nav-item:hover .dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

.dropdown-content {
    display: flex;
    padding: 40px;
    gap: 48px;
    position: relative;
}

.dropdown-section {
    flex: 1;
    animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.dropdown-header {
    font-size: 16px;
    font-weight: 700;
    color: #667eea;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dropdown-header:hover {
    color: #764ba2;
    transform: translateX(4px);
}

.dropdown-list {
    list-style: none;
}

.dropdown-list li {
    margin-bottom: 14px;
    transition: all 0.3s ease;
}

.dropdown-list li:hover {
    transform: translateX(8px);
}

.dropdown-list a {
    text-decoration: none;
    color: #6b7280;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    padding: 4px 0;
}

.dropdown-list a::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transition: all 0.3s ease;
    transform: translateY(-50%);
}

.dropdown-list a:hover {
    color: #1f2937;
    font-weight: 600;
    padding-left: 16px;
}

.dropdown-list a:hover::before {
    width: 8px;
}

.shop-all-link {
    margin-top: 24px;
    padding-top: 24px;
    border-top: 2px solid #f3f4f6;
}

.shop-all-link a {
    font-weight: 700;
    color: #1a1a1a;
    font-size: 14px;
    text-decoration: none;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    letter-spacing: 0.5px;
}

.shop-all-link a:hover {
    color: #667eea;
    transform: translateX(8px);
}

.promo-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    padding: 32px;
    color: white;
    max-width: 300px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
}

.promo-section::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: float 6s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(5deg); }
}

.promo-section h3 {
    font-size: 32px;
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 12px;
    position: relative;
    z-index: 2;
}

.promo-section p {
    font-size: 14px;
    opacity: 0.95;
    margin-bottom: 16px;
    line-height: 1.5;
    position: relative;
    z-index: 2;
}

.promo-btn {
    background: rgba(255,255,255,0.2);
    border: 2px solid rgba(255,255,255,0.3);
    color: white;
    padding: 12px 20px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 2;
    letter-spacing: 0.5px;
}

.promo-btn:hover {
    background: white;
    color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255,255,255,0.3);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .header-container {
        padding: 15px 20px;
    }
    
    .nav {
        gap: 32px;
    }
    
    .search-input {
        width: 250px;
    }
    
    .dropdown {
        min-width: 700px;
    }
}

@media (max-width: 768px) {
    .header-container {
        padding: 12px 16px;
    }
    
    .nav {
        display: none;
    }
    
    .search-input {
        width: 200px;
        padding: 12px 20px 12px 45px;
    }
    
    .dropdown {
        min-width: 320px;
    }
    
    .dropdown-content {
        flex-direction: column;
        gap: 24px;
        padding: 24px;
    }
    
    .logo {
        font-size: 28px;
    }
    
    .header-actions {
        gap: 16px;
    }
    
    .icon-btn {
        padding: 10px;
        font-size: 20px;
    }
}

@media (max-width: 480px) {
    .search-input {
        width: 160px;
        padding: 10px 16px 10px 40px;
    }
    
    .search-icon {
        left: 14px;
        font-size: 16px;
    }
    
    .icon-btn {
        font-size: 18px;
        padding: 8px;
    }
    
    .dropdown {
        min-width: 280px;
    }
    
    .dropdown-content {
        padding: 20px;
    }
    
    .logo {
        font-size: 24px;
    }
}

/* Loading and Interaction States */
.category-link {
    position: relative;
    overflow: hidden;
}

.category-link::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
    transition: left 0.5s ease;
}

.category-link:hover::after {
    left: 100%;
}

/* Smooth scrolling for any internal links */
html {
    scroll-behavior: smooth;
}

/* Focus states for accessibility */
.nav-link:focus,
.icon-btn:focus,
.search-input:focus,
.promo-btn:focus {
    outline: 2px solid #667eea;
    outline-offset: 2px;
}
</style>

{% block header %}
<!--Jinja2 template variables-->
{% set nav_items = [
    {
        'name': 'Clothing',
        'active': true,
        'dropdown': {
            'sections': [
                {
                    'title': 'WOMEN TOPS',
                    'subitems': [
                        'T-Shirts', 'Blouses', 'Sandals', 'Tank Tops ', 'Crop Tops', 'Tube Tops', 'Tunics', 'Wrap Tops', 'Peplum Tops', 'Bodysuits', 'Sweaters', 'Cardigans', 'Sweatshirts  Hoodies' 
                    ]
                }           
            ], 
            'categories': ['Tops', 'Bottoms', 'Dresses', 'Outwear', 'Activewear', 'Sleepwear', 'Undergarments', 'Swimwear', 'Occasionwear', 'Traditionalwear'],
            'promo': {
                'title': 'READY. SET. GIFT.',
                'subtitle': 'MORE THAN ESSENTIAL',
                'description': 'Extra roominess makes the On My Level Carryall the must-have for all your must-haves.',
                'button': 'SHOP SHOES'
            }
        }
    },
    {
        'name': 'Shoes',
        'dropdown': {
            'sections': [
                {
                    'title': 'HEELS',
                    'subitems': [
                        'Stilettos', 'Pumps', 'Block Heels', 'Wedge Heels', 'Kitten Heels', 'Platform Heels', 'Ankle Strap Heels', 'Mules', 'Peep Toe Heels', 'Slingbacks'
                    ]
                }
            ],
            'categories': [
                'Heels',
                'Flats',
                'Sandals',
                'Sneakers',
                'Boots',
                'Slippers & Comfort Wear',
                'Occasion / Dress Shoes'
            ],
            'promo': {
                'title': 'READY. SET. GIFT.',
                'subtitle': 'MORE THAN ESSENTIAL',
                'description': 'Extra roominess makes the On My Level Carryall the must-have for all your must-haves.',
                'button': 'SHOP ACCESORIES'
            }
        }
    },
    {
      'name': 'Accessories',
      'dropdown': {
            'sections': [
                {
                    'title': 'ACCESSORIES',
                    'subitems': [
                        'Handbags', 'Shoulder Bags', 'Tote Bags', 'Crossbody Bags', 'Clutches / Evening Bags', 'Backpacks', 'Wallets & Pouches'
                    ]
                }
            ],
            'categories': [
                'Bags',
                'Jewelry',
                'Hair Accessories',
                'Belts',
                'Scarves & Wraps',
                'Hats & Caps',
                'Eyewear',
                'Watches',
                'Gloves',
                'Others'
            ],
            'subitems_map': {
                'Bags': ['Handbags', 'Shoulder Bags', 'Tote Bags', 'Crossbody Bags', 'Clutches / Evening Bags', 'Backpacks', 'Wallets & Pouches'],
                'Jewelry': ['Necklaces & Pendants', 'Earrings', 'Bracelets & Bangles', 'Rings', 'Anklets', 'Brooches & Pins'],
                'Hair Accessories': ['Hairbands / Headbands', 'Hair Clips & Barrettes', 'Scrunchies', 'Hair Scarves & Wraps', 'Hair Claws'],
                'Belts': ['Waist Belts', 'Skinny Belts', 'Wide / Statement Belts', 'Chain Belts'],
                'Scarves & Wraps': ['Silk Scarves', 'Shawls', 'Wraps / Stoles', 'Bandanas'],
                'Hats & Caps': ['Sun Hats', 'Fedoras', 'Beanies', 'Baseball Caps', 'Berets'],
                'Eyewear': ['Sunglasses', 'Eyeglass Frames', 'Reading Glasses'],
                'Watches': ['Dress Watches', 'Casual Watches', 'Smartwatches'],
                'Gloves': ['Fashion Gloves', 'Winter Gloves', 'Evening Gloves'],
                'Others': ['Keychains / Bag Charms', 'Phone Charms / Cases', 'Tights & Socks']
            },
            'promo': {
                'title': 'READY. SET. GIFT.',
                'subtitle': 'MORE THAN ESSENTIAL',
                'description': 'Extra roominess makes the On My Level Carryall the must-have for all your must-haves.',
                'button': 'SHOP CLOTHES'
            }
        }
    },
    {'name': "What's New"}
] %}

<!--Top Banner-->
<div class="top-banner">
    Get 20% Cash Back <a href="#" onclick="return false;">Click Here</a>
</div>

<!--Header--> 
<header class="header">
    <div class="header-container">
        <a href="#" class="logo" onclick="return false;">SHOP.CO</a>
        
        <nav class="nav">
            {% for item in nav_items %}
            <div class="nav-item">
                <a href="#" class="nav-link {% if item.active %}active{% endif %}" onclick="return false;">
                    {{ item.name }}
                </a>
                {% if item.dropdown %}
                <div class="dropdown">
                    <div class="dropdown-content">
                        <div class="dropdown-section">
                            {% for category in item.dropdown.categories %}
                            <div class="dropdown-list">
                                <li>
                                    <a href="#" class="category-link" data-category="{{ category|lower|replace(' ', '') }}" data-category-label="{{ category }}" data-nav="{{ item.name|lower }}" onclick="return false;">{{ category }}</a>
                                </li>
                            </div>
                            {% endfor %}
                            <div class="shop-all-link">
                                <a href="#" onclick="return false;">
                                    SHOP ALL {{ item.name|upper }}
                                    <span>‚Üí</span>
                                </a>
                            </div>
                        </div>
                        {% for section in item.dropdown.sections %}
                        <div class="dropdown-section">
                            {% if section.title %}
                            <div class="dropdown-header" id="category-section-title-{{ item.name|lower }}">
                                {{ section.title }}
                                <span>‚Üí</span>
                            </div>
                            {% endif %}
                            <ul class="dropdown-list" data-section-title="{{ section.title|lower }}-{{ item.name|lower }}">
                                {% for subitem in section.subitems %}
                                <li><a href="#" onclick="return false;">{{ subitem }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endfor %}
                        {% if item.dropdown.promo %}
                        <div class="dropdown-section">
                            <div class="promo-section">
                                <h3>{{ item.dropdown.promo.title }}</h3>
                                <p><strong>{{ item.dropdown.promo.subtitle }}</strong></p>
                                <p>{{ item.dropdown.promo.description }}</p>
                                <button class="promo-btn">{{ item.dropdown.promo.button }} ‚Üí</button>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </nav>
        
        <div class="header-actions">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search for products...">
                <span class="search-icon">üîç</span>
            </div>
            
            <button class="icon-btn cart-btn">
                üõí
                <span class="cart-count">2</span>
            </button>
            
            <button class="icon-btn">‚ù§Ô∏è</button>
            
            <div class="profile-dropdown-wrapper" style="position: relative;">
                <button class="icon-btn profile-btn" id="profileBtn" aria-haspopup="true" aria-expanded="false">üë§</button>
                <div class="profile-dropdown" id="profileDropdown" style="display: none; position: absolute; right: 0; top: 120%; min-width: 180px; background: #fff; border: 1px solid #e1e8ed; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); z-index: 1200; overflow: hidden;">
                    <div style="border-top: 1px solid #f3f4f6;"></div>
                            <a href="{{ url_for('buyer_my_account') }}" class="profile-dropdown-item" style="display: block; padding: 14px 22px; color: #374151; text-decoration: none; font-weight: 500; font-size: 15px; transition: background 0.2s;">My Account</a>
                            <a href="{{ url_for('buyer_my_purchase') }}" class="profile-dropdown-item" style="display: block; padding: 14px 22px; color: #374151; text-decoration: none; font-weight: 500; font-size: 15px; transition: background 0.2s;">My Purchases</a>
                            <a href="#" class="profile-dropdown-item" style="display: block; padding: 14px 22px; color: #ef4444; text-decoration: none; font-weight: 600; font-size: 15px; transition: background 0.2s;" onclick="return false;">Logout</a>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
// Enhanced dynamic dropdowns with smoother animations
document.addEventListener('DOMContentLoaded', function() {
    // Utility function for smooth transitions
    function smoothTransition(element, property, startValue, endValue, duration = 300) {
        const startTime = performance.now();
        const startVal = parseFloat(startValue);
        const endVal = parseFloat(endValue);
        const difference = endVal - startVal;
        
        function animate(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // Use easing function for smoother animation
            const easeOutCubic = 1 - Math.pow(1 - progress, 3);
            const currentValue = startVal + (difference * easeOutCubic);
            
            element.style[property] = currentValue + (property === 'opacity' ? '' : 'px');
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            }
        }
        
        requestAnimationFrame(animate);
    }

    // Enhanced animation for dropdown items
    function animateDropdownItems(container, delay = 50) {
        const items = container.querySelectorAll('.dropdown-list li');
        items.forEach((item, index) => {
            item.style.opacity = '0';
            item.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                item.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                item.style.opacity = '1';
                item.style.transform = 'translateY(0)';
            }, index * delay);
        });
    }

    // --- Clothing ---
    var clothingCategorySubitems = {
        'tops': [
            'T-Shirts', 'Blouses', 'Button-downs', 'Tank Tops', 'Crop Tops', 'Tube Tops', 'Tunics', 'Wrap Tops', 'Peplum Tops', 'Bodysuits', 'Sweaters', 'Cardigans', 'Sweatshirts  Hoodies'
        ],
        'bottoms': [
            'Jeans', 'Pants & Trousers', 'Leggings & Jeggings', 'Skirts', 'Shorts', 'Culottes & Capris'
        ],
        'dresses': [
            'Casual Dresses', 'Work / Office', 'Shirt Dresses', 'Wrap Dresses', 'Maxi Dresses', 'Midi Dresses', 'Mini Dresses', 'Bodycon', 'A-line', 'Cocktail', 'Evening Gowns', 'Sundresses'
        ],
        'outwear': [
            'Jackets', 'Coats', 'Blazers', 'Vests & Gilets', 'Capes & Ponchos', 'Cardigans'
        ],
        'activewear': [
            'Sports Bras', 'Active Tops', 'Leggings & Yoga Pants', 'Joggers & Track Pants', 'Biker Shorts', 'Hoodies & Sweatshirts', 'Tracksuits & Co-ords'
        ],
        'sleepwear': [
            'Pajama Sets', 'Nightgowns & Chemises', 'Robes & Kimonos', 'Sleep Shirts', 'Lounge Tops', 'Lounge Pants & Shorts', 'Matching Loungewear Sets'
        ],
        'undergarments': [
            'Bras', 'Panties', 'Shapewear', 'Slips & Camisoles', 'Lingerie Sets', 'Hosiery'
        ],
        'swimwear': [
            'Bikinis', 'One-piece Swimsuits', 'Tankinis', 'Monokinis / Cut-out Suits', 'Cover-ups', 'Rash Guards & Swim Tops'
        ],
        'occasionwear': [
            'Formal Wear', 'Party Wear', 'Wedding Wear', 'Festive Wear', 'Cultural / Traditional Wear'
        ],
        'traditionalwear': [
            'Abayas & Kaftans (Middle East)', 'Kimonos & Yukatas (Japan)', 'Cheongsams / Qipaos (China)', 'Kurti / Salwar Kameez (South Asia)', 'Sarees (India)', 'Filipiniana / Baro\'t Saya (Philippines)', 'Hanbok (Korea)', 'Dirndl (Central Europe)'
        ]
    };

    var clothingCategoryLabels = {
        'tops': 'WOMEN TOPS',
        'bottoms': 'WOMEN BOTTOMS',
        'dresses': 'WOMEN DRESSES',
        'outwear': 'WOMEN OUTWEAR',
        'activewear': 'WOMEN ACTIVEWEAR',
        'sleepwear': 'WOMEN SLEEPWEAR',
        'undergarments': 'WOMEN UNDERGARMENTS',
        'swimwear': 'WOMEN SWIMWEAR',
        'occasionwear': 'WOMEN OCCASIONWEAR',
        'traditionalwear': 'WOMEN TRADITIONALWEAR'
    };

    var clothingSubitemsList = document.querySelector('ul.dropdown-list[data-section-title="women tops-clothing"]');
    var clothingSectionTitle = document.getElementById('category-section-title-clothing');
    var clothingOriginalSectionTitle = clothingSectionTitle ? clothingSectionTitle.innerHTML : '';
    var clothingOriginalSubitems = clothingSubitemsList ? clothingSubitemsList.innerHTML : '';

    function showClothingCategorySubitems(category) {
        if (clothingSubitemsList && clothingCategorySubitems[category]) {
            // Fade out current items
            const currentItems = clothingSubitemsList.querySelectorAll('li');
            currentItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateX(-20px)';
                }, index * 20);
            });

            // Update content after fade out
            setTimeout(() => {
                clothingSubitemsList.innerHTML = clothingCategorySubitems[category].map(function(item) {
                    return '<li><a href="#" onclick="return false;">' + item + '</a></li>';
                }).join('');

                // Animate new items in
                animateDropdownItems(clothingSubitemsList);

                if (clothingSectionTitle && clothingCategoryLabels[category]) {
                    clothingSectionTitle.style.transition = 'all 0.3s ease';
                    clothingSectionTitle.innerHTML = clothingCategoryLabels[category] + '<span>‚Üí</span>';
                }
            }, 200);
        }
    }

    function restoreClothingOriginalSubitems() {
        if (clothingSubitemsList) {
            clothingSubitemsList.innerHTML = clothingOriginalSubitems;
            animateDropdownItems(clothingSubitemsList);
        }
        if (clothingSectionTitle) clothingSectionTitle.innerHTML = clothingOriginalSectionTitle;
    }

    Object.keys(clothingCategorySubitems).forEach(function(cat) {
        var link = document.querySelector('.category-link[data-category="' + cat + '"][data-nav="clothing"]');
        if (link) {
            link.addEventListener('mouseenter', function() { 
                showClothingCategorySubitems(cat); 
            });
            link.addEventListener('click', function(e) { 
                e.preventDefault(); 
                showClothingCategorySubitems(cat); 
            });
        }
    });

    var clothingDropdownContent = clothingSubitemsList ? clothingSubitemsList.closest('.dropdown-content') : null;
    
    if (clothingDropdownContent) {
        clothingDropdownContent.addEventListener('mouseleave', function() {
            restoreClothingOriginalSubitems();
        });
        clothingDropdownContent.addEventListener('mouseenter', function() {
            showClothingCategorySubitems('tops');
        });
    }

    // --- Shoes ---
    var shoesCategorySubitems = {
        'heels': [
            'Stilettos', 'Pumps', 'Block Heels', 'Wedge Heels', 'Kitten Heels', 'Platform Heels', 'Ankle Strap Heels', 'Mules', 'Peep Toe Heels', 'Slingbacks'
        ],
        'flats': [
            'Ballet Flats', 'Loafers', 'Moccasins', 'Espadrilles', 'Flat Sandals'
        ],
        'sandals': [
            'Strappy Sandals', 'Gladiator Sandals', 'Slide Sandals', 'Slingback Sandals'
        ],
        'sneakers': [
            'Casual Sneakers', 'Fashion / Lifestyle Sneakers', 'Chunky / Platform Sneakers', 'Slip-on Sneakers'
        ],
        'boots': [
            'Ankle Boots', 'Knee-High Boots', 'Over-the-Knee / Thigh-High Boots', 'Chelsea Boots', 'Combat Boots'
        ],
        'slippers&comfortwear': [
            'Indoor Slippers', 'Flip-Flops', 'Slip-on Comfort Sandals'
        ],
        'occasion/dressshoes': [
            'Party Shoes', 'Wedding Shoes', 'Formal Dress Shoes'
        ]
    };

    var shoesCategoryLabels = {
        'heels': 'HEELS',
        'flats': 'FLATS',
        'sandals': 'SANDALS',
        'sneakers': 'SNEAKERS',
        'boots': 'BOOTS',
        'slippers&comfortwear': 'SLIPPERS & COMFORT WEAR',
        'occasion/dressshoes': 'OCCASION / DRESS SHOES'
    };

    var shoesSubitemsList = document.querySelector('ul.dropdown-list[data-section-title="heels-shoes"]');
    var shoesSectionTitle = document.getElementById('category-section-title-shoes');
    var shoesOriginalSectionTitle = shoesSectionTitle ? shoesSectionTitle.innerHTML : '';
    var shoesOriginalSubitems = shoesSubitemsList ? shoesSubitemsList.innerHTML : '';

    function showShoesCategorySubitems(category) {
        if (shoesSubitemsList && shoesCategorySubitems[category]) {
            const currentItems = shoesSubitemsList.querySelectorAll('li');
            currentItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateX(-20px)';
                }, index * 20);
            });

            setTimeout(() => {
                shoesSubitemsList.innerHTML = shoesCategorySubitems[category].map(function(item) {
                    return '<li><a href="#" onclick="return false;">' + item + '</a></li>';
                }).join('');

                animateDropdownItems(shoesSubitemsList);

                if (shoesSectionTitle && shoesCategoryLabels[category]) {
                    shoesSectionTitle.style.transition = 'all 0.3s ease';
                    shoesSectionTitle.innerHTML = shoesCategoryLabels[category] + '<span>‚Üí</span>';
                }
            }, 200);
        }
    }

    function restoreShoesOriginalSubitems() {
        if (shoesSubitemsList) {
            shoesSubitemsList.innerHTML = shoesOriginalSubitems;
            animateDropdownItems(shoesSubitemsList);
        }
        if (shoesSectionTitle) shoesSectionTitle.innerHTML = shoesOriginalSectionTitle;
    }

    Object.keys(shoesCategorySubitems).forEach(function(cat) {
        var link = document.querySelector('.category-link[data-category="' + cat + '"][data-nav="shoes"]');
        if (link) {
            link.addEventListener('mouseenter', function() { showShoesCategorySubitems(cat); });
            link.addEventListener('click', function(e) { e.preventDefault(); showShoesCategorySubitems(cat); });
        }
    });

    var shoesDropdownContent = shoesSubitemsList ? shoesSubitemsList.closest('.dropdown-content') : null;
    if (shoesDropdownContent) {
        shoesDropdownContent.addEventListener('mouseleave', function() {
            restoreShoesOriginalSubitems();
        });
        shoesDropdownContent.addEventListener('mouseenter', function() {
            var firstCat = Object.keys(shoesCategorySubitems)[0];
            showShoesCategorySubitems(firstCat);
        });
    }

    // --- Accessories ---
    var accessoriesCategorySubitems = {
        'bags': ['Handbags', 'Shoulder Bags', 'Tote Bags', 'Crossbody Bags', 'Clutches / Evening Bags', 'Backpacks', 'Wallets & Pouches'],
        'jewelry': ['Necklaces & Pendants', 'Earrings', 'Bracelets & Bangles', 'Rings', 'Anklets', 'Brooches & Pins'],
        'hairaccessories': ['Hairbands / Headbands', 'Hair Clips & Barrettes', 'Scrunchies', 'Hair Scarves & Wraps', 'Hair Claws'],
        'belts': ['Waist Belts', 'Skinny Belts', 'Wide / Statement Belts', 'Chain Belts'],
        'scarves&wraps': ['Silk Scarves', 'Shawls', 'Wraps / Stoles', 'Bandanas'],
        'hats&caps': ['Sun Hats', 'Fedoras', 'Beanies', 'Baseball Caps', 'Berets'],
        'eyewear': ['Sunglasses', 'Eyeglass Frames', 'Reading Glasses'],
        'watches': ['Dress Watches', 'Casual Watches', 'Smartwatches'],
        'gloves': ['Fashion Gloves', 'Winter Gloves', 'Evening Gloves'],
        'others': ['Keychains / Bag Charms', 'Phone Charms / Cases', 'Tights & Socks']
    };

    var accessoriesCategoryLabels = {
        'bags': 'BAGS',
        'jewelry': 'JEWELRY',
        'hairaccessories': 'HAIR ACCESSORIES',
        'belts': 'BELTS',
        'scarves&wraps': 'SCARVES & WRAPS',
        'hats&caps': 'HATS & CAPS',
        'eyewear': 'EYEWEAR',
        'watches': 'WATCHES',
        'gloves': 'GLOVES',
        'others': 'OTHERS'
    };

    var accessoriesSubitemsList = document.querySelector('ul.dropdown-list[data-section-title="accessories-accessories"]');
    var accessoriesSectionTitle = document.getElementById('category-section-title-accessories');
    var accessoriesOriginalSectionTitle = accessoriesSectionTitle ? accessoriesSectionTitle.innerHTML : '';
    var accessoriesOriginalSubitems = accessoriesSubitemsList ? accessoriesSubitemsList.innerHTML : '';

    function showAccessoriesCategorySubitems(category) {
        if (accessoriesSubitemsList && accessoriesCategorySubitems[category]) {
            const currentItems = accessoriesSubitemsList.querySelectorAll('li');
            currentItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateX(-20px)';
                }, index * 20);
            });

            setTimeout(() => {
                accessoriesSubitemsList.innerHTML = accessoriesCategorySubitems[category].map(function(item) {
                    return '<li><a href="#" onclick="return false;">' + item + '</a></li>';
                }).join('');

                animateDropdownItems(accessoriesSubitemsList);

                if (accessoriesSectionTitle && accessoriesCategoryLabels[category]) {
                    accessoriesSectionTitle.style.transition = 'all 0.3s ease';
                    accessoriesSectionTitle.innerHTML = accessoriesCategoryLabels[category] + '<span>‚Üí</span>';
                }
            }, 200);
        }
    }

    function restoreAccessoriesOriginalSubitems() {
        if (accessoriesSubitemsList) {
            accessoriesSubitemsList.innerHTML = accessoriesOriginalSubitems;
            animateDropdownItems(accessoriesSubitemsList);
        }
        if (accessoriesSectionTitle) accessoriesSectionTitle.innerHTML = accessoriesOriginalSectionTitle;
    }

    Object.keys(accessoriesCategorySubitems).forEach(function(cat) {
        var link = document.querySelector('.category-link[data-category="' + cat + '"][data-nav="accessories"]');
        if (link) {
            link.addEventListener('mouseenter', function() { showAccessoriesCategorySubitems(cat); });
            link.addEventListener('click', function(e) { e.preventDefault(); showAccessoriesCategorySubitems(cat); });
        }
    });

    var accessoriesDropdownContent = accessoriesSubitemsList ? accessoriesSubitemsList.closest('.dropdown-content') : null;
    if (accessoriesDropdownContent) {
        accessoriesDropdownContent.addEventListener('mouseleave', function() {
            restoreAccessoriesOriginalSubitems();
        });
        accessoriesDropdownContent.addEventListener('mouseenter', function() {
            var firstCat = Object.keys(accessoriesCategorySubitems)[0];
            showAccessoriesCategorySubitems(firstCat);
        });
    }

    // Enhanced search functionality with smooth animations
    const searchInput = document.querySelector('.search-input');
    const searchIcon = document.querySelector('.search-icon');
    
    searchInput.addEventListener('focus', function() {
        this.parentElement.style.transform = 'scale(1.02)';
    });
    
    searchInput.addEventListener('blur', function() {
        this.parentElement.style.transform = 'scale(1)';
    });

    // Enhanced cart animation
    const cartBtn = document.querySelector('.cart-btn');
    const cartCount = document.querySelector('.cart-count');
    
    cartBtn.addEventListener('click', function() {
        cartCount.style.animation = 'none';
        setTimeout(() => {
            cartCount.style.animation = 'pulse 0.6s ease';
        }, 10);
    });

    // Smooth scroll behavior for any internal navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
// Profile dropdown logic
const profileBtn = document.getElementById('profileBtn');
const profileDropdown = document.getElementById('profileDropdown');
let profileDropdownOpen = false;

function closeProfileDropdown() {
    if (profileDropdown) {
        profileDropdown.style.display = 'none';
        profileBtn.setAttribute('aria-expanded', 'false');
        profileDropdownOpen = false;
    }
}

function openProfileDropdown() {
    if (profileDropdown) {
        profileDropdown.style.display = 'block';
        profileBtn.setAttribute('aria-expanded', 'true');
        profileDropdownOpen = true;
    }
}

if (profileBtn && profileDropdown) {
    profileBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        if (profileDropdownOpen) {
            closeProfileDropdown();
        } else {
            openProfileDropdown();
        }
    });
    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (profileDropdownOpen && !profileDropdown.contains(e.target) && e.target !== profileBtn) {
            closeProfileDropdown();
        }
    });
    // Keyboard accessibility
    profileBtn.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeProfileDropdown();
    });
}
</script>
{% endblock %}
